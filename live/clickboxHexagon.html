<!DOCTYPE html>
<html lang="en" onmousedown="MouseDown()" onmouseup="MouseUp()" onmouseleave="MouseExit()" oncontextmenu="return false;">
  <head>
    <script src="javascript.js"></script>
    <link rel="stylesheet" href="css/clickboxStyles.css"> 
    <script>	  
class HexagonButton extends GameButton {
	constructor(x, y, Facing = "") {
	  	super(x, y, Facing = ""); 
        this.maxClicks = 2;		
	}

    createHitbox(svg, hitbox) {
	    let point = svg.createSVGPoint();
	    point.x = 50;
	    point.y = 99;
	    hitbox.points.appendItem(point);
	    point = svg.createSVGPoint();
	    point.x = 99;
	    point.y = 75;
	    hitbox.points.appendItem(point);
	    point = svg.createSVGPoint();
	    point.x = 99;
	    point.y = 25;
	    hitbox.points.appendItem(point);
	    point = svg.createSVGPoint();			
	    point.x = 50;
	    point.y = 1;
	    hitbox.points.appendItem(point);
	    point = svg.createSVGPoint();	
	    point.x = 1;
	    point.y = 25;
	    hitbox.points.appendItem(point);
	    point = svg.createSVGPoint();
	    point.x = 1;
	    point.y = 75;
	    hitbox.points.appendItem(point);
	    point = svg.createSVGPoint();			
	}

    defineArea() {
	    let midBtn = this;
        let n = 105;
        let e = 105;
        let s = 105;
        let w = 105;
		if (midBtn.walls.includes("n")) { // the presence of a wall will limit the area on that side
		    n = 5;
		}
		if (midBtn.walls.includes("e")) {
		    e = 5;
		}
		if (midBtn.walls.includes("s")) {
		    s = 5;
		}
		if (midBtn.walls.includes("w")) {
		    w = 5;
		}
	    for (let i = 0; i < GameButtons.length; i++) {
		    let btn = GameButtons[i];
		    if (btn.offsetx < midBtn.offsetx + e &&
		        btn.offsetx > midBtn.offsetx - w &&
			    btn.offsety < midBtn.offsety + s &&
			    btn.offsety > midBtn.offsety - n) {
              midBtn.affectedButtons.push(btn);
		    }
		  }
		for (let c = 0; c < CycleButtons.length; c++) {
			let cbtn = CycleButtons[c];
		    if (cbtn.offsetx < midBtn.offsetx + e &&
		        cbtn.offsetx > midBtn.offsetx - w &&
			    cbtn.offsety < midBtn.offsety + s &&
			    cbtn.offsety > midBtn.offsety - n) {
              midBtn.affectedButtons.push(cbtn.counterpart);
		    }		
	    }		
	}

    createModifier(modifier) {
        modifier.setAttribute("r","20px");
        modifier.setAttribute("cx","50px");
        modifier.setAttribute("cy","50px");		
	}
	
}	  
	  
      function GenerateLevelNum (Level) {
	    if (Level == 1) {                              //////////////////////////////////////////////////////////// Level 1
		  GenerateLevel (size*size/3);                 //////////////////////////////////////////////////////////// Level 1
	    } else if (Level == 2) {                       //////////////////////////////////////////////////////////// Level 2
		  GenerateLevel (size*size/1.5);                 //////////////////////////////////////////////////////////// Level 2
	    } else if (Level == 3) {                       //////////////////////////////////////////////////////////// Level 3
		  GenerateLevel (size*size);                 //////////////////////////////////////////////////////////// Level 3
		} else {
		  InitializeButtonGroups();
		}	
	  }
	  
	  function NewLevel(){
	    let i = 0;
		let xOffset = 0;
		let yOffset = 0;
        DestroyGrid();
		document.getElementById("new-level").innerHTML = "New Level";
		if (parseInt(document.getElementById("level-size").value) < 3){
		  document.getElementById("level-size").value = 3;
		}
		if (parseInt(document.getElementById("level-size").value) > 30){
		  document.getElementById("level-size").value = 30;
		}
		let grid = document.createElementNS("http://www.w3.org/2000/svg", 'svg');
	  	size = parseInt(document.getElementById("level-size").value); 
		grid.setAttribute("viewBox", "0 0 " + (size + 2)*100 + " " + (size + 2)*75);
		grid.style.width = "100%";
		grid.style.height = "auto";
		grid.id = "grid-container";	
		document.getElementById("demo").appendChild(grid);		
	    for (let y = 0; y < size; y++) {
          if (y%2 == 0) {
		    xOffset = 50;
		  } else {
		    xOffset = 0;
		  }
          for (let x = 0; x < size; x++){
            i++;	 			
	        GameButtons.push(new HexagonButton(100*x + xOffset + 75, y*75 + yOffset + 75));
	      }  
	      x = 0;
        }	
		GenerateLevelNum (document.getElementById("level-number").value);
      }
 
	</script>
  </head>
  <body>
    <main>
	  	  
    <div class="dropdown">
      <button class="dropbtn">Menu</button>
      <div class="dropdown-content">
        <a href="index.html">Square</a>
        <a href="clickboxTriangle.html">Triangle</a>
        <a href="clickboxHexagon.html">Hexagon</a>
        <a href="clickboxPentagon.html">Pentagon</a>
      </div>
    </div>  
	  
	<div id="demo" class="demo">
	  <div>
	    <div class="level-num-div">
		  <p class="size-num-text">Number</p>
	      <input type="number" class="level-number" id="level-number" value="1" min="-18" max="18">		
		</div>
	    <button class="new-level" id="new-level" onclick="NewLevel()" >New Level</button>
		<div class="level-size-div">
		  <p class="size-num-text">Size</p>
	      <input type="number" class="level-size" id="level-size" value="5" min="3" max="30">		
		</div>
	  </div>
      <div><button class="reset" onclick="ResetClick()">Reset</button></div>
	</div>
	<div class ="bottom">
      <button id="press" class="press" ontouchstart="PressTouch(this)">Press</button>
	  <button id="clear" class="clear" ontouchstart="ClearTouch(this)">Clear</button>
      <button id="lock" class="lock" ontouchstart="LockTouch(this)">Lock</button>
	</div>
    </main>
	
	
	<script>

	NewLevel();
	  
	</script>  	
	
	
  </body>
</html>
